<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="style3.css">
      <link rel="stylesheet" href="style.css">

      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>

    <title>Home page</title>
  </head>
  <body>
  <div class="background-home">

      <img class="home" src="images/pg.jpg" alt="">


<!-- nav bar  -->
<!-- Load an icon library to show a hamburger menu (bars) on small screens -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<a href="loginpage.html"> <button type="button" class="btn2" id="loginn-top" name="button">Login</button> </a>
<a href="signup.html"><button type="button" class="btn3" id="signup-top" name="button">Sign up</button></a>
<div class="topnav" id="myTopnav">
  <a class="po" href="home.html" >Home</a>
  <a href="events.html">Events</a>
  <a href="contact.html">Contact</a>
  <a class="po" href="about.html">About</a>
  <a href="javascript:void(0);" class="icon" onclick="myFunction()">
    <i class="fa fa-bars"></i>
  </a>
</div>
<div class="content">
  <div class="hero">

    <div class="form-box">
      <div class="login-title">
        SIGN UP

        <div class="check">
          <input type="name" id="first" class="cssinput" placeholder="First Name" >
          <input type="name"  id="last" class="cssinput" placeholder="Last Name" >
          <input type="phoneno" id="phone" class="cssinput" placeholder="Phone no." >
          <input type="email" id="email" class="cssinput" placeholder="Email" >
          <input type="password" id="password" class="cssinput" placeholder="Password" min="6" max="8">


        </div>
        <div class="button">
    <strong><button type="login" id = "login"name="login" class="btn"><a class="sign" href="loginpage.html">Login</a></button>
            <button type="sign up" id="signup"  name="sign up" class="btn">Sign up</button></strong>
        </div>
    </div>
  </div>
</div>

<hr class="hr">
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <script type="module">
          // Import the functions you need from the SDKs you need
          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
          import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
          import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
          import { getFirestore } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-firestore.js";
          import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-firestore.js";

          // TODO: Add SDKs for Firebase products that you want to use
          // https://firebase.google.com/docs/web/setup#available-libraries

          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
          const firebaseConfig = {
            apiKey: "AIzaSyB6iIwAmPC01Wk-eWyIc8wr7Tv3xa_yZD4",
    authDomain: "blood-bank-f3ae1.firebaseapp.com",
    databaseURL: "https://blood-bank-f3ae1-default-rtdb.firebaseio.com",
    projectId: "blood-bank-f3ae1",
    storageBucket: "blood-bank-f3ae1.appspot.com",
    messagingSenderId: "608972566323",
    appId: "1:608972566323:web:8d5843024ca1cf6187d846",
    measurementId: "G-S6L3Q0745G"
          };

          // Initialize Firebase
          const app = initializeApp(firebaseConfig);
          const analytics = getAnalytics(app);
          const auth = getAuth();
          const db = getFirestore(app);
// Initialize Cloud Firestore and get a reference to the service


          //console.log(app);

           //----- New Registration code start
        document.getElementById("signup").addEventListener("click", function() {
          var email =  document.getElementById("email").value;
          var password = document.getElementById("password").value;
          var phoneno =  document.getElementById("phone").value;
          var fname =  document.getElementById("first").value;
          var lname =  document.getElementById("last").value;
          var name =  fname +" "+ lname;


          //For new registration
          createUserWithEmailAndPassword(auth, email, password)
          .then(async(userCredential) => {
            // Signed in
            const user = userCredential.user;
            console.log(user);
            alert("Registration successfully!!");
            try {
              const docRef = await addDoc(collection(db, "users"), {
                name: name,
                email: email,
                phoneno: phoneno
              });
              console.log("Document written with ID: ", docRef.id);
              } catch (e) {
              console.error("Error adding document: ", e);
              }
              var element1 = document.getElementById("signup-top");
              var element2 = document.getElementById("loginn-top");

                element1.classList.add("mystyle");
                element2.classList.add("mystyle");
                window.location.replace("home.html");
            })
              .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                // ..
                console.log(errorMessage);
                alert(error);
              });


            });

    //



        </script>
  </body>
</html>
