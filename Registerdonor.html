<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="style3.css">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>

    <title>blood bank donor registration </title>
  </head>
  <body>
    <div class="hero">

      <div class="form-box">
        <div class="login-title">
          SIGN UP AS A DONOR

          <div class="check">
            <input type="name" id="first" class="cssinput field1" placeholder="First Name" >
            <input type="name"  id="last" class="cssinput field2" placeholder="Last Name" >
            <input type="number" id="age" class="cssinput" placeholder="Age" >
            <input type="text" id="blood_group" class="cssinput" placeholder="blood group(A/A-/A+/B/B+/B-.....)" >
            <input type="email" id="email" class="cssinput" placeholder="Email" >
            <input type="password" id="password" class="cssinput" placeholder="Password" min="6" max="8">
            <input type="number"  id="phone" class="cssinput" placeholder="contact number" >
           <input type="email" id="login_email" class="cssinput" placeholder="Email" >
           <input type="password" id="login_password" class="cssinput" placeholder="Password"  min="6" max="8">
                <input type="date"  id="date" class="cssinput" placeholder="date" >
                <label for="Preference" class="cssinput la">Preference</label>

                <select name="Preference" class="preference" id="Preference">
                    <option style="background: #dfe7ff;color:#4e46e5;" value="1">Select Preference</option>
                  <option style="background: #dfe7ff;color:#4e46e5;" value="2">Only in 3 months</option>
                  <option style="background: #dfe7ff;color:#4e46e5;" value="3">Emergency only</option>
                </select>



          </div>
          <div class="button">
            <button type="Submit" name="submit" class="btn"><a class="sign" href="/loginpage.html">Submit</a></button>
            <button type="button" name="back" class="btn"><a class="sign" href="/loginpage.html">back</a></button>
          </div>


      </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>


    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-analytics.js";
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-auth.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-firestore.js";
      import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-firestore.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyB_ByGFvLvGHYNq3_YTDITI5KzDQNQUBps",
        authDomain: "doctor-appointment-001.firebaseapp.com",
        projectId: "doctor-appointment-001",
        storageBucket: "doctor-appointment-001.appspot.com",
        messagingSenderId: "231952019929",
        appId: "1:231952019929:web:fa8d9b2f65dd7636ab69c8",
        measurementId: "G-KLP59Y9NK2"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth();
      const db = getFirestore(app);

      //console.log(app);

       //----- New Registration code start
    document.getElementById("signup").addEventListener("click", function() {
      var email =  document.getElementById("email").value;
      var password = document.getElementById("password").value;

      //For new registration
      createUserWithEmailAndPassword(auth, email, password)
      .then(async(userCredential) => {
        // Signed in
        const user = userCredential.user;
        console.log(user);
        alert("Registration successfully!!");
        try {
  const docRef = await addDoc(collection(db, "users"), {
    name: name,
    email:email


  });
  console.log("Document written with ID: ", docRef.id);
} catch (e) {
  console.error("Error adding document: ", e);
}
        // ...
      })
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        // ..
        console.log(errorMessage);
        alert(error);
      });
    });
    //----- End
    </script>
    </body>
    </html>
